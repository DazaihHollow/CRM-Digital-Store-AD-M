<div class="bg-white p-3 rounded shadow-sm border border-slate-200">
    <div class="flex justify-between items-start">
        <span class="text-sm font-medium text-slate-800">{{ task.title }}</span>
        <!-- Dropdown de estado simple -->
        <form action="/tasks/{{ task.id }}/update_status" method="POST">
            <select name="status" onchange="this.form.submit()"
                class="text-xs border-none bg-transparent text-slate-400 focus:ring-0 cursor-pointer">
                <option value="todo" {% if task.status=='todo' %}selected{% endif %}>ðŸ•’</option>
                <option value="in_progress" {% if task.status=='in_progress' %}selected{% endif %}>ðŸš€</option>
                <option value="done" {% if task.status=='done' %}selected{% endif %}>âœ…</option>
            </select>
        </form>
    </div>

    {% if task.description %}
    <p class="text-xs text-slate-500 mt-1 line-clamp-2">{{ task.description }}</p>
    {% endif %}

    <div class="mt-3 flex items-center justify-between">
        <div class="flex -space-x-1 overflow-hidden">
            {% for assignee in task.assignees %}
            <div class="h-6 w-6 rounded-full bg-slate-300 flex items-center justify-center ring-2 ring-white text-[10px] text-slate-600 font-bold"
                title="{{ assignee.username }}">
                {{ assignee.username[0] | upper }}
            </div>
            {% endfor %}
            {% if not task.assignees %}
            <span class="text-xs text-slate-400 italic">Sin asignar</span>
            {% endif %}
        </div>

        {% if task.prospect %}
        <span class="inline-flex items-center px-2 py-0.5 rounded text-xs font-medium bg-blue-50 text-blue-700">
            {{ task.prospect.name }}
        </span>
        {% endif %}
    </div>
</div>